{% extends 'base.html' %} {% block head%}
<title>Compare | Comparative Judgement</title>

{% endblock %} {% block body %}
<div class="container-fluid ">
    {% with messages = get_flashed_messages() %} {% if messages %} {% for msg in messages%}
    <!--<p>{{msg}}</p>-->
    <div class="badalert">
        <span class="badclosebtn" onclick="this.parentElement.style.display='none';">&times;</span> {{msg}}
    </div>
    {% endfor %} {% endif %} {% endwith %}

    <div class="jumbotron max-screen-size">
        <h1 class="display-4 ">Let the judgement commence!</h1>

        <hr class="my-4 ">
        <p class="lead centre_text">Please select which piece of work you think is better.</p>

        <!--<img src=" {{ url_for( 'static', filename='images/rubric.png' ) }} " width="80%" style="padding-bottom: 30px" alt="" class="center">-->
            
                <div class="row">
                    
                        <!--<form method="POST" id="ajaxTest">-->
                            <!--<p class="tweet_text" id="workPageNumber">{{ tweet1 }}</p>
                            <input type="radio" id="tweet1" name="radio" value="{{tweet1_id}}">
                            <label for="tweet1">CSS1</label><br>
                            
                                <input type="submit" value="previous" id="1down"/>
                                <input type="submit" value="next" id="1up"/>
                            </form>-->

                            <div id="tweet_1" class="col-lg-6 img-wrapper ">
                                <img src="https://www.billhartzer.com/wp-content/uploads/2018/04/Screenshot-2018-4-13-Bill-Hartzer-Bill-Hartzer-shared-Omar-Hfs-post-.png" width="100%">
                            </div>
        
                            <!--<iframe class="col-lg-6" id='tweet_1' src="https://scitechdaily.com/images/New-Hubble-Image-Shows-Part-of-the-Large-Magellanic-Cloud.jpg" title="W3Schools Free Online Web Tutorials">
                                <p>
                                    Frames are not supported by your browser.
                                </p>
                            </iframe>
        
        
        
                        
                            <iframe class="col-lg-6" src={{ tweet2 }} id='tweet_2' title="W3Schools Free Online Web Tutorials">
                                <p class="tweet_text">{{ tweet2 }}</p>
                            </iframe>-->

                            <div id="tweet_2" class="col-lg-6 img-wrapper ">
                                <img src="https://i.pinimg.com/originals/d4/e3/d9/d4e3d9dc0257478964d257c1b4b08655.png" width="100%">
                            </div>
        
                            
                            <!--<input type="radio" id="tweet2" name="radio" value="{{tweet2_id}}">
                            <label for="tweet2">CSS</label><br>-->
                
                </div>

                <section class="container-fluid">
                

                <form action="/compare/" id='yourFormId' method="POST">
                    <div class="selection-options">
                    <center>
                    <table class="options">
                        <tr class="bg-green">
                            <th class="column-width-large"></th>
                            <th class="column-width-sml"><center>Student 1</center></th>
                            <th class="column-width-sml"><center>Student 2</center></th>
                        </tr>
                        
                            {% for key, value in exam_details.items() %}
                                <tr>
                                    <th class="column-width-large details"> {{key}} </br>
                                        {{value|safe}} </br>
                                        &nbsp;
                                    </th>
                                    <td class="column-width-sml"><center><input type="radio" id="{{key}}" name="{{key}}" value="{{work1_id}}"></center></td>
                                    <td class="column-width-sml"><center><input type="radio" id="{{key}}" name="{{key}}" value="{{work2_id}}"></center></td>
                                </tr>
                            {% endfor %}
                        
                    </table>
                    </center>
                    </div>
                    
                    <label class="center" style="padding-top:20px" for="file">Comparison progress:</label>
                    <progress class="center" id="file" value="{{ percent }}" max="100"> 90% </progress>
                    <p class="center" style="padding-top:15px">
                        Why did you select that piece of work?: </br>
                        <center>
                            <textarea rows="5" cols="40" name="content" placeholder="Enter justification here! (Optional)" style="width:45%"></textarea><br>
                        </center>
                    </p>
                    <input type="submit" value="Vote!" id='submitBtn' class="center" style="width:25%">
                    <p class="center" style="padding-top:15px">
                        <center>
                            {{ tweet_count - 1}} done, only {{ 5 - (tweet_count - 1)}} to go!!! You can do this!
                        </center>
                    </p>
                </form>

        
            <!--<form action="/compare/" id='yourFormId' method="POST">
                <div class="selection-options">
                <center>
                <table class="options">
                    <tr class="bg-green">
                        <th class="column-width-large"></th>
                        <th class="column-width-sml"><center>Student 1</center></th>
                        <th class="column-width-sml"><center>Student 2</center></th>
                    </tr>
                    <tr>
                        <th class="column-width-large details"> AO 1: </br>
                            Identify and interpret explicit and implicit information and ideas. Select and synthesise evidence from different texts. </br>
                            &nbsp;
                        </th>
                        <td class="column-width-sml"><center><input type="radio" id="radio 1" name="radio 1" value="{{work1_id}}"></center></td>
                        <td class="column-width-sml"><center><input type="radio" id="radio 1" name="radio 1" value="{{work2_id}}"></center></td>
                    </tr>
                    <tr class="bg-green">
                        <th class="cloumn-width-large">AO 2: </br>
                        Explain, comment on and analyse how writers use language and structure to achieve effects and influence readers, using relevant subject terminology to support their views.</br>
                        &nbsp;
                        </th>
                        <center>
                        <td class="column-width-sml"><center><input class="radio-centre" type="radio" id="radio 2" name="radio 2" value="{{work1_id}}"></center></td>
                        </center>
                        <td class="column-width-sml"><center><input class="radio-centre" type="radio" id="radio 2" name="radio 2" value="{{work2_id}}"></center></td>
                    </tr>
                    <tr>
                        <th class="column-width-large">AO 3: </br>
                            Compare writersâ€™ ideas and perspectives, as well as how these are conveyed, across two or more texts. </br>
                            &nbsp;

                        </th>
                        <td class="column-width-sml"><center><input type="radio" id="radio 3" name="radio 3" value="{{work1_id}}"></center></td>
                        <td class="column-width-sml"><center><input type="radio" id="radio 3" name="radio 3" value="{{work2_id}}"></center></td>
                    </tr>
                    <tr class="bg-green">
                        <th class="column-width-large">AO 4: </br>
                            Evaluate texts critically and support this with appropriate textual references. </br>
                            &nbsp;
                        </th>
                        <td class="column-width-sml"><center><input type="radio" id="radio 4" name="radio 4" value="{{work1_id}}"></center></td>
                        <td class="column-width-sml"><center><input type="radio" id="radio 4" name="radio 4" value="{{work2_id}}"></center></td>
                    </tr>
                    <tr>
                        <th class="column-width-large">AO 5: </br>
                        Communicate clearly, effectively and imaginatively, selecting and adapting tone, style and register for different forms, purposes and audiences.
                        Organise information and ideas, using structural and grammatical features to support coherence and cohesion of texts.</br>
                        &nbsp;
                        </th>
                        <td class="column-width-sml"><center><input type="radio" id="radio 5" name="radio 5" value="{{work1_id}}"></center></td>
                        <td class="column-width-sml"><center><input type="radio" id="radio 5" name="radio 5" value="{{work2_id}}"></center></td>
                    </tr>
                    <tr class="bg-green">
                        <th class="column-width-large">AO 6: </br>
                        Candidates must use a range of vocabulary and sentence structures for clarity, purpose and effect, with accurate spelling and punctuation.
                        &nbsp;
                        </th>
                        <td class="column-width-sml"><center><input type="radio" id="radio 6" name="radio 6" value="{{work1_id}}"></center></td>
                        <td class="column-width-sml"><center><input type="radio" id="radio 6" name="radio 6" value="{{work2_id}}"></center></td>
                    </tr>
                </table>
                </center>
                </div>
                
                <label class="center" style="padding-top:20px" for="file">Comparison progress:</label>
                <progress class="center" id="file" value="{{ percent }}" max="100"> 90% </progress>
                <p class="center" style="padding-top:15px">
                    Why did you select that piece of work?: </br>
                    <center>
                        <textarea rows="5" cols="40" name="content" placeholder="Enter justification here! (Optional)" style="width:45%"></textarea><br>
                    </center>
                </p>
                <input type="submit" value="Vote!" id='submitBtn' class="center" style="width:25%">
                <p class="center" style="padding-top:15px">
                    <center>
                        {{ tweet_count - 1}} done, only {{ 5 - (tweet_count - 1)}} to go!!! You can do this!
                    </center>
                </p>
            </form>-->
            
        </section>
    </div>
</div>
<!--script to disable the submit button -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">  
</script>
<script type="text/javascript">

$(document).ready(function () {
    $("#yourFormId").submit(function () {
        $("#submitBtn").attr("disabled", true);
        return true;
    });
});

$("#tweet_2").height($("#tweet_1").height());



//document.getElementById('down_1').onclick = test_click;
//document.getElementById('up_1').onclick = test_click;

//function test_click(clicked) {
//                document.getElementById('workPageNumber').innerHTML = "Button clicked, id = "
//                    + this.id;
//            }   

$('#1up').click(function() {
  //do something
  var workPage1 = document.getElementById('workPageNumber').innerHTML;
    
    var params = {work1_up:workPage1,work1_down:None}

    var xhr = new XMLHttpRequest();

    xhr.open('post', '../update_work', true);
    xhr.setRequestHeader('Content-type', 'application/json');

    xhr.onload = function () {
        console.log('Reached');
        document.getElementById('workPageNumber').innerHTML = this.responseText;
    }
    xhr.send(JSON.stringify(params));
});
$('#1down').click(function() {
  var workPage1 = document.getElementById('workPageNumber').innerHTML;
    
    var params = {work1_up:None,work1_down:workPage1}

    var xhr = new XMLHttpRequest();

    xhr.open('post', '../update_work', true);
    xhr.setRequestHeader('Content-type', 'application/json');

    xhr.onload = function () {
        console.log('Reached');
        document.getElementById('workPageNumber').innerHTML = this.responseText;
    }
    xhr.send(JSON.stringify(params));
});

//https://www.youtube.com/watch?v=rxYBDOgdwDs
//document.getElementById("ajaxTest").addEventListener('submit', getData)

function getData(e) {
    e.preventDefault();

    var workPage1 = document.getElementById('workPageNumber').innerHTML;
    
    var params = {work1:workPage1}

    var xhr = new XMLHttpRequest();

    xhr.open('post', '../update_work', true);
    xhr.setRequestHeader('Content-type', 'application/json');

    xhr.onload = function () {
        console.log('Reached');
        document.getElementById('workPageNumber').innerHTML = this.responseText;
    }
    xhr.send(JSON.stringify(params));
}


// https://www.youtube.com/watch?v=v2TSTKlrPwo
//function loadNewDecimal() {
 //   $.ajax({
//        URL:"/update_work",
//        type: "POST",
//        dataType: "json",
//        success: function(data) {
//            $(one).replaceWith(data)
//        }
//    });
//}

var d = $('#tweet_1');
//d.scrollTop(d.prop("scrollHeight"));

</script>
<!--script ends here-->
{% endblock %}